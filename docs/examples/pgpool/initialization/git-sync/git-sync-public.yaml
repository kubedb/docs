apiVersion: kubedb.com/v1alpha2
kind: Pgpool
metadata:
  name: pgpool-demo
  namespace: demo
spec:
  version: "4.4.5"
  replicas: 1
  postgresRef:
    name: postgres
    namespace: demo
  configuration:
    inline:
      pgpoolConfig:
        num_init_children : 6
        max_pool : 65
        child_life_time : 400
  deletionPolicy: WipeOut
  init:
    script:
      scriptPath: "current"
      git:
        args:
          - --repo=https://github.com/kubedb/pgbouncer-pgpool-init-scripts
          - --depth=1
          - --add-user=true
          - --period=60s
          - --one-time
